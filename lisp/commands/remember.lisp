
;;------------------------------------------------------------------------------------------------------------------------ ;;
;; Remember ;;
;;------------------------------------------------------------------------------------------------------------------------ ;;
(in-package :stumpwm)

(defun remember-all () ()
"Similiar to remember-group except all information is dumped, useful
for next startup or recalling all undo actions."
  (dump-to-datadir "rules") (dump-to-datadir "desktop"))

;; dump [current]-group (for current-screen), [current]-screen, desktop or window-placement-rules
;; to a dynamically named file in user defined *data-dir*.

(defcommand dump-to-datadir (expr) (:rest)
  "Dump group (from current-screen), screen (current-screen), desktop or rules to file in data-dir.
Just specify what you want to dump and this will dynamically create and name file accordingly."
  (cond ((string-equal expr 'group)
         (let* ((o (make-pathname :name (format nil "screen_窿哏蝻躔唼窿扉篝ㄣ栳ㄧ弭孱⒛捎刑临暴扉篝ㄧ蝻躔钺礤ㄣ躜蝈铘珧秕皓┅呼疱㈧轶稷轰彐狨祠溽翎溟颡┅ㄤ蹴瓠珧秕瓠麸骈戾铹礤篌徵漉眇邃屮痱┅è篝蜷铉羼踽屮痱筱蝈孱戾舄è磲脲疳翳钺礤侯犴ㄦ矧磲铋Ⅲ泸邋钸窿扉篝ㄣ栳ㄧ弭孱⒛捎刑临暴┅呼疱㈧轶稷轰彐狨祠溽翎溟颡┅ㄤ蹴瓠筱蝈孱麸骈戾铹礤篌徵漉眇邃屮痱┅è篝蜷铉羼踽屮痱蝓戾螬戾舄è磲脲疳翳钺礤侯犴Ⅳ殪瀛蝓戾螈呼疱㈧轶稷轰彐狨祠溽翎溟颡┅ㄤ蹴瓠鏖钿秣痨徙屙孱舡蝓戾铹礤篌徵漉眇邃屮痱┅è篝蜷铉羼踽屮痱т弩媵镳戾舄è磲脲疳翳钺礤侯犴溴箅麸稷呼疱㈧轶稷轰彐狨祠溽翎溟颡┅ㄤ蹴瓠溴箅麸瓠麸骈戾铹礤篌徵漉眇邃屮痱┅礤篌徵滹铘腩秣栾麸漉眇幄屮痱┅┅换漉眇麸骈戾麒殂轶箝戾铘怩鏖翳盹蝈轭骘蝽狒轹痱镯痿螽ㄤ彐泔眄犷漉眇珧秕瓠麸骈戾ㄦ殪濠è候弩㈢蝻躔麸骈戾┅⒛蹴痼翳骝犴弩镦翳沲蝌孱珧秕镦翳沲蝌孱筱蝈孱麸翳钺礤骈戾ㄤ蹴瓠麸骈戾ㄤ蹴瓠珧秕ㄣ躜蝈铘珧秕皓骈戾┅ㄤ彐泔眄犷漉眇筱蝈孱麸骈戾ㄦ殪濠è候弩Ⅲ泸邋麸骈戾┅⒛蹴痼翳骝犴弩镦犰珧秕痼镦翳沲蝌孱筱蝈孱麸翳钺礤骈戾ㄤ蹴瓠麸骈戾ㄤ蹴瓠筱蝈孱ㄣ躜蝈铘筱蝈孱┅骈戾┅ㄤ彐泔眄犷漉眇溴箅麸瓠麸骈戾ㄦ殪濠è候弩溴箅麸麸骈戾┅⒛蹴痼翳骝犴弩镦犰珧秕痼镦犰筱蝈孱麸翳钺礤骈戾ㄤ蹴瓠麸骈戾ㄤ蹴瓠溴箅麸皓骈戾┅换换换球秕痼换换换ㄤ彐躅蝈礤礅弪珧秕é镳糸镱犰ㄧ蝻躔ㄣ躜蝈铘珧秕皓┅ī⒁屙屙忮沲蝌孱珧秕轭骘蝽狒轱忮骘蝈汜祆轭犷雉桢泔眄犷矧骢钽糸镱蔑礅轭邃鏖翳躅滹泔眄犷翳轶犰祜黧骘麸珑扉铉忮赭邋翳赭躅滹篝狒弩ㄩㄥ铙躜瀛溟蝈泗矧殄蟓屮轶躅滹溽翎溟颡麒孱珧秕ㄤ蹴瓠珧秕瓠麸骈戾磲脲疳翳钺礤侯犴ㄦ矧磲铋Ⅲ泸邋钸窿哏蝻躔唼窿扉篝ㄣ栳ㄧ弭孱⒛捎刑临暴扉篝ㄧ蝻躔钺礤ㄣ躜蝈铘珧秕皓┅呼疱㈧轶稷轰彐狨祠躅滹溽翎溟颡┅┅ㄤ彐躅骓舡珧秕瓠篝狒躞ㄧ蝻躔戾è筱蝈孱ㄧ蝻躔筱蝈孱珧秕皓┅ㄣ镱è羼珧秕筱蝈孱沲蝌孱舡珧秕筱蝈孱┅＼è犷豉疱箦泔钿筱蝈孱珧秕痼筱蝈孱┅х蝻躔ㄥ珧秕箦泔钿筱蝈孱珧秕痼筱蝈孱┅┅＼＼┅┅ㄤ彐泔眄犷蝈篝狎舡箫骠骘蜱弭īī⒂镦义篝狎郁蹴鹱鏖翳秕蝈礤礅弪轭沲蝌孱篝狒瀹澡扉箴痱镢弩轶瞌蝈篝狎翦洚深篝遽洮泔铘蝻牾眇麸翳鲥蝙忮玳铑轭镦翳篝蹴瘅痱镧蜥懋澡轶溟骀弪骝镯遗釉烈袁麒殂蝈篝狎趔翳躅轼痱镢弩螽换娱钽翳痱镢弩轶瞌蝈篝狎翦洮屮轶糸铉沲篝镯辁狒轱铙蝈磲轭换徭翦翳蝈篝狎舢翳蝻呼镳戾鲥候弩翎螋┅ㄤ彐泔眄犷蝈篝狎舡箫骠īī⒂镦义篝狎郁蹴鹱麒殪蝈礤礅弪轭沲蝌孱篝狒瀹澡扉箴痱镢弩轶瞌蝈篝狎翦洚深篝遽洮泔铘蝻牾眇麸翳鲥蝙忮玳铑轭镦翳篝蹴瘅痱镧蜥懋澡轶溟骀弪骝镯遗釉烈袁麒殂蝈篝狎趔翳躅轼痱镢弩螽娱钽翳痱镢弩轶瞌蝈篝狎翦洮屮轶糸铉沲篝镯辁狒轱铙蝈磲轭徭翦翳蝈篝狎舢蝈礤礅弪犰飑蝈篝狎舡箫骠骘蜱弭┅ㄤ彐泔眄犷洵犰獒蝈篝狎蝈篝狎舡箫骠ㄤ彐泔眄犷祜徜蜚骘蜱弭īī⒁屐镝翳梨殪妍篝蹴瘅眚泯骈戾鏖翳秕蝈礤礅弪沲蝌孱篝狒瀹ㄨ犷潇弪汜箦痱镧鏖翳蝈篝狎趔礤铛祜徜蜚骈戾铋飑┅ㄥ蝌矧ㄣ礤篌徵⑥罗豹膨蝻祜徜轭蜚骈戾恨立悌ê铒弪蝻é蝈篝狎珞ㄤ邈灬蝈ㄩ珙矧狎珞┅礤篌徵Ⅱ骈戾祜徜邃篚沣弩箧蹯禊┅┅篝蹴瘅砗溴驺镯磲钿祜徜蜚īī⒁屐镝翳梨殪妍篝蹴瘅眚泯骈戾麒殪蝈礤礅弪轭沲蝌孱篝狒瀹蝈礤礅弪犰飑祜徜蜚骘蜱弭┅ㄤ彐泔眄犷聃轸īī⒀蹰郁蹴鹱麒殪蝈礤礅弪轭沲蝌孱篝狒瀹ㄣ镱è骈钿珧秕ㄣ躜蝈铘筱蝈孱筱蜥翥桊徜珧秕瓠钺礤ㄩㄥㄣ躜蝈铘珧秕皓ㄦ轭洵珧秕ㄣ躜蝈铘筱蝈孱筱蜥翥桊徜珧秕瓠钺礤┅ㄧ腴祆痱镧ㄧ铄舂腴祆珧秕ㄦ轭洵珧秕ㄣ躜蝈铘筱蝈孱筱蜥翥桊徜珧秕瓠钺礤ㄣ躜蝈铘珧秕皓┅┅蝈礤礅弪犰飑聃轸骘蜱弭┅篝蹴瘅砗溴驺镯磲钿聃轸骘蜱弭īī⒀蹰郁蹴鹱鏖翳秕蝈礤礅弪轭沲蝌孱篝狒瀹鏖翳镳孱骈戾篝蝈犴溴怩绛骈戾轰轵邈糸镱洪洪姝屮轶趔后躔弪箦溴┅ㄣ镱è骈钿珧秕ㄣ躜蝈铘筱蝈孱筱蜥翥桊徜珧秕瓠钺礤ㄩㄥㄣ躜蝈铘珧秕皓ㄦ轭洵珧秕ㄣ躜蝈铘筱蝈孱筱蜥翥桊徜珧秕瓠钺礤┅ㄧ腴祆痱镧ㄧ铄舂腴祆珧秕ㄦ轭洵珧秕ㄣ躜蝈铘筱蝈孱筱蜥翥桊徜珧秕瓠钺礤ㄣ躜蝈铘珧秕皓┅┅翳蝻呼镳戾鲥厚蹰舂ㄡ祆鏖钿秣螬ㄩ姝戾ī